const body=document.querySelector("body"),formBox=document.querySelector("#form-box"),nextBtn=document.querySelector("#next-btn"),prevBtn=document.querySelector("#prev-btn"),inputGroup=document.querySelector("#input-group"),inputField=document.querySelector("#input-field"),inputLabel=document.querySelector("#input-label"),inputProgress=document.querySelector("#input-progress"),progress=document.querySelector("#progress-bar"),shakeTime=70,switchTime=200,questions=[{info:"Enter your first name"},{info:"Enter your last name"},{info:"Enter your email",pattern:/\S+@\S+\.\S+/},{info:"Create a password",type:"password"}];let position=0;const getQuestion=()=>{inputLabel.innerHTML=questions[position].info,inputField.type=questions[position].type||"text",inputField.value=questions[position].infoResponse||"",inputField.focus(),progress.style.width=100*position/questions.length+"%",prevBtn.className=position?"fas fa-arrow-left":"fas fa-user",showQuestion()},showQuestion=()=>{inputGroup.style.opacity=1,inputProgress.style.transition="",inputProgress.style.width="100%"},hideQuestion=()=>{inputGroup.style.opacity=0,inputLabel.style.marginLeft=0,inputProgress.style.width=0,inputProgress.style.transition="none",inputGroup.style.border=null},validate=()=>{inputField.value.match(questions[position].pattern||/.+/)?inputPass():inputFail()},transform=(e,t)=>{formBox.style.transform=`translate(${e}px, ${t}px)`},inputFail=()=>{formBox.className="error";for(let e=0;e<4;e++)setTimeout(transform,70*e,20*(e%2*2-1),0),setTimeout(transform,280,0,0),inputField.focus()},inputPass=()=>{formBox.className="",setTimeout(transform,0,0,10),setTimeout(transform,70,0,0),questions[position].infoResponse=inputField.value,questions[++position]?(hideQuestion(),getQuestion()):(hideQuestion(),formBox.className="close",progress.style.width="100%",formComplete())},formComplete=()=>{const e=document.createElement("h1");e.classList.add("end"),e.appendChild(document.createTextNode(`Thanks ${questions[0].infoResponse}, you are registered and will get an email shortly!`)),setTimeout(()=>{formBox.parentElement.appendChild(e),setTimeout(()=>{e.style.opacity=1},50)},1e3)};document.addEventListener("DOMContentLoaded",getQuestion),nextBtn.addEventListener("click",validate),document.addEventListener("keyup",e=>{13===(e.which||e.keyCode)&&validate()});
